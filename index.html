<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" type="image/png" href="favicon.png">
<title>Workout Tracker</title>
<style>
  :root{
    --bg:#0f172a;
    --card:#111827;
    --muted:#94a3b8;
    --text:#e5e7eb;
    --accent:#22c55e;
    --border:#273449;
    --table-head:#0b1223;
    --table-row:#0f172a;
    --input:#0b1223;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
    --link:#38bdf8;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background:linear-gradient(120deg, var(--bg), #030712 40%);
    color:var(--text);
    font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans";
  }
  header{
    position:sticky; top:0; z-index:10;
    background:rgba(3,7,18,.75);
    backdrop-filter:saturate(140%) blur(10px);
    border-bottom:1px solid var(--border);
  }
  .container{max-width:1000px; margin:0 auto; padding:20px}
  .title-row{display:flex; gap:16px; align-items:center; justify-content:space-between; flex-wrap:wrap}
  h1{font-size:22px; font-weight:700; margin:0}
  .controls{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
  label{font-size:13px; color:var(--muted)}
  select, input, button{
    border:1px solid var(--border);
    background:var(--input);
    color:var(--text);
    border-radius:12px;
    padding:10px 12px;
    outline:none;
  }
  button{
    cursor:pointer;
    transition:.2s transform ease, .2s box-shadow ease, .2s background ease;
    background:linear-gradient(180deg, #10b981, #059669);
    border:none;
    color:white;
    box-shadow:0 6px 18px rgba(16,185,129,.25);
    display:inline-flex; align-items:center; gap:6px;
  }
  button.secondary{
    background:linear-gradient(180deg, #1f2937, #0f172a);
    color:#e5e7eb;
    box-shadow:none;
    border:1px solid var(--border);
  }
  button:hover{transform:translateY(-1px)}
  .grid{display:grid; grid-template-columns:1fr; gap:16px; margin-top:18px;}
  .card{
    background:linear-gradient(180deg, var(--card), #0b1223);
    border:1px solid var(--border);
    border-radius:18px;
    box-shadow:var(--shadow);
    overflow:hidden;
  }
  .card h2{
    margin:0;
    padding:14px 16px;
    font-size:16px; font-weight:700; letter-spacing:.2px;
    display:flex; align-items:center; justify-content:space-between;
    border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, #0b1223, #0b1223);
    gap: 10px;
  }
  .card h2 small{color:var(--muted); font-weight:500}
  table{width:100%; border-collapse:separate; border-spacing:0;}
  thead th{
    text-align:left; font-size:12px; letter-spacing:.3px; text-transform:uppercase;
    color:#cbd5e1; padding:12px 14px; background:var(--table-head);
    position:sticky; top:58px;
  }
  tbody td{padding:10px 14px; border-top:1px solid var(--border); background:var(--table-row);}
  tbody tr:nth-child(even) td{background:#0c1428}
  td.compact{white-space:nowrap}
  td input[type="text"]{width:100%; border-radius:10px;}
  td select{width:100%; border-radius:10px;}
  .save-indicator{margin-left:6px; font-size:12px; color:#86efac; opacity:0; transition:.25s;}
  .save-indicator.show{opacity:1}
  .ex-link{
    color:var(--link);
    text-decoration:none;
    transition:color .2s ease;
  }
  .ex-link:hover{ color:#7dd3fc; text-decoration:underline; }
  svg.icon{width:14px; height:14px;}
</style>
</head>
<body>
  <header>
    <div class="container">
      <div class="title-row">
        <h1>Workout Tracker — <span id="wkLabel">Week 1</span> <span id="saveBadge" class="save-indicator">✓ Saved</span></h1>
        <div class="controls">
          <label for="weekSel">Week</label>
          <select id="weekSel"></select>
          <label for="daySel">Day</label>
          <select id="daySel">
            <option value="monday">Monday</option>
            <option value="tuesday">Tuesday</option>
            <option value="wednesday">Wednesday</option>
            <option value="thursday">Thursday</option>
            <option value="friday">Friday</option>
            <option value="saturday">Saturday</option>
            <option value="sunday">Sunday</option>
          </select>
          <button id="copyPrev" title="Pasteious week for this day">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 21H9a2 2 0 0 1-2-2V7"/><path d="M5 3h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/>
            </svg>
            Paste
          </button>
          <button id="resetDay" class="secondary" title="Clear inputs for this day">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"/><path d="M19 6l-2 14a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2L5 6"/><path d="M10 11v6"/><path d="M14 11v6"/>
            </svg>
            Reset
          </button>
        </div>
      </div>
    </div>
  </header>
  <main class="container">
    <section id="cards" class="grid"></section>
  </main>

<script>
// ======== Program Definition ========
const PROGRAM = [
  { key:"monday",    title:"Monday — Chest", items:[
    { name:"Barbell Bench Press", sets:4, reps:"6–8" },
    { name:"Incline Dumbbell Press", sets:4, reps:"8–10" },
    { name:"Decline Barbell Press", sets:3, reps:"8–10" },
    { name:"Dumbbell Fly", sets:3, reps:"10–12" },
    { name:"Incline Dumbbell Squeeze Press", sets:3, reps:"10–12" },
    { name:"Weighted Push-Up", sets:3, reps:"max" },
  ]},
  { key:"tuesday",   title:"Tuesday — Back + Biceps (B1)", items:[
    { name:"Barbell Bent-Over Row", sets:4, reps:"6–8" },
    { name:"One-Arm Dumbbell Row", sets:3, reps:"8–10" },
    { name:"Incline Y-Raise", sets:3, reps:"12–15" },
    { name:"Dumbbell Pullover", sets:3, reps:"10–12" },
    { name:"Barbell Curl", sets:3, reps:"8–10" },
    { name:"Incline Dumbbell Curl", sets:3, reps:"10–12" },
  ]},
  { key:"wednesday", title:"Wednesday — Shoulders + Triceps (T1)", items:[
    { name:"Standing Barbell Overhead Press", sets:4, reps:"6–8" },
    { name:"Close-Grip Bench Press", sets:4, reps:"6–8" },
    { name:"Dumbbell Lateral Raise", sets:3, reps:"12–15" },
    { name:"Rear Delt Raise", sets:3, reps:"12–15" },
    { name:"Dumbbell Skullcrusher", sets:3, reps:"8–10" },
    { name:"One-Arm Overhead Extension", sets:3, reps:"10–12" },
  ]},
  { key:"thursday",  title:"Thursday — Legs", items:[
    { name:"Front Squat", sets:4, reps:"6–8" },
    { name:"Romanian Deadlift", sets:4, reps:"8–10" },
    { name:"Bulgarian Split Squat", sets:3, reps:"8–10" },
    { name:"Barbell Hip Thrust", sets:3, reps:"8–10" },
    { name:"Hamstring Curl", sets:3, reps:"12–15" },
    { name:"Standing Calf Raise", sets:4, reps:"12–15" },
  ]},
  { key:"friday",    title:"Friday — Back + Biceps (B2)", items:[
    { name:"Pendlay Row", sets:4, reps:"6–8" },
    { name:"Chest-Supported Dumbbell Row", sets:3, reps:"8–10" },
    { name:"Incline T-Raise", sets:3, reps:"12–15" },
    { name:"Reverse Fly", sets:3, reps:"12–15" },
    { name:"Concentration Curl", sets:3, reps:"10–12" },
    { name:"Hammer Curl", sets:3, reps:"10–12" },
  ]},
  { key:"saturday", title:"Saturday — Core + Forearm", items:[
    { name:"Barbell Rollout", sets:3, reps:"6–10" },
    { name:"Side Plank", sets:3, reps:"20–40 s/side" },
    { name:"Reverse Crunch", sets:3, reps:"12–15" },
    { name:"Seated Wrist Curl", sets:3, reps:"12–15" },
    { name:"Reverse Wrist Curl", sets:3, reps:"12–15" },
    { name:"Finger Curl", sets:3, reps:"10–15" },
  ]},
  { key:"sunday",    title:"Sunday — Shoulders + Triceps (T2)", items:[
    { name:"Seated Dumbbell Shoulder Press", sets:4, reps:"6–8" },
    { name:"Close-Grip Floor Press", sets:4, reps:"6–8" },
    { name:"Dumbbell Front Raise", sets:3, reps:"12–15" },
    { name:"Rear Delt Row", sets:3, reps:"12–15" },
    { name:"Dumbbell Tate Press", sets:3, reps:"10–12" },
    { name:"Dumbbell Kickback", sets:3, reps:"12–15" },
  ]},
];

// Status options with emoji
const STATUS = ["", "⬆️ Increase", "⏸️ Maintain", "⬇️ Decrease"];

// 12 weeks
const WEEKS = Array.from({length:12}, (_,i)=>({value:String(i+1), label:`Week ${i+1}`}));

// DOM
const $ = s => document.querySelector(s);
const cardsEl = $("#cards");
const weekSel = $("#weekSel");
const daySel = $("#daySel");
const saveBadge = $("#saveBadge");
const wkLabel = $("#wkLabel");
const copyPrevBtn = $("#copyPrev");
const resetDayBtn = $("#resetDay");

const storageKey = (week, day) => `workout:week:${week}:day:${day}`;

function showSaved(){ saveBadge.classList.add("show"); setTimeout(()=>saveBadge.classList.remove("show"), 1000); }

function loadDay(week, day){
  const raw = localStorage.getItem(storageKey(week, day));
  let data = {};
  try{ data = raw ? JSON.parse(raw) : {}; }catch(e){ data = {}; }
  document.querySelectorAll("tbody tr").forEach((tr, idx)=>{
    const w = tr.querySelector('input[type="text"]');
    const s = tr.querySelector('select');
    const row = data[idx] || {};
    w.value = row.weight || "";
    s.value = row.status || "";
  });
}

function saveDay(week, day){
  const payload = [];
  document.querySelectorAll("tbody tr").forEach(tr=>{
    const w = tr.querySelector('input[type="text"]').value.trim();
    const s = tr.querySelector('select').value;
    payload.push({weight:w, status:s});
  });
  localStorage.setItem(storageKey(week, day), JSON.stringify(payload));
  showSaved();
}

function copyPrevDay(){
  const curWeek = parseInt(weekSel.value, 10);
  if(curWeek <= 1){ alert("Week 1 has no previous week."); return; }
  const day = daySel.value;
  const prevKey = storageKey(curWeek - 1, day);
  const curKey  = storageKey(curWeek, day);
  const prevRaw = localStorage.getItem(prevKey);
  if(!prevRaw){ alert("No data found for previous week on this day."); return; }
  localStorage.setItem(curKey, prevRaw);
  loadDay(weekSel.value, daySel.value);
  showSaved();
}

function resetDay(){
  if(!confirm("Are you sure you want to reset this day?")) return;

  const curKey = storageKey(weekSel.value, daySel.value);
  localStorage.removeItem(curKey);
  document.querySelectorAll("tbody tr").forEach(tr=>{
    tr.querySelector('input[type="text"]').value = "";
    tr.querySelector('select').value = "";
  });
  showSaved();
}

function ytHowToUrl(term){
  return "https://www.youtube.com/results?search_query=" + encodeURIComponent("how to " + term);
}

function renderDay(dayKey){
  const block = PROGRAM.find(b=>b.key === dayKey);
  if(!block){ cardsEl.innerHTML = "<div class='card'><h2>Not found</h2></div>"; return; }
  const totalSets = block.items.reduce((a,it)=> a + (parseInt(it.sets,10)||0), 0);
  const rowsHtml = block.items.map(it=>`
    <tr>
      <td><a class="ex-link" href="${ytHowToUrl(it.name)}" target="_blank" rel="noopener">${it.name}</a></td>
      <td class="compact">${it.sets}</td>
      <td class="compact">${it.reps}</td>
      <td><input type="text" inputmode="decimal" placeholder="e.g., 80 kg"></td>
      <td>
        <select>
          ${STATUS.map(s=>`<option value="${s}">${s}</option>`).join("")}
        </select>
      </td>
    </tr>
  `).join("");

  cardsEl.innerHTML = `
    <section class="card" data-day-key="${block.key}">
      <h2><span>${block.title}</span> <small>${totalSets} total sets</small></h2>
      <table>
        <thead>
          <tr><th>Exercise</th><th>Sets</th><th>Reps</th><th>Weight</th><th>Status</th></tr>
        </thead>
        <tbody>${rowsHtml}</tbody>
      </table>
    </section>
  `;

  const handler = ()=>{ clearTimeout(handler._t); handler._t = setTimeout(()=> saveDay(weekSel.value, daySel.value), 250); };
  cardsEl.addEventListener("input", handler);
  cardsEl.addEventListener("change", handler);
}

function init(){
  weekSel.innerHTML = WEEKS.map(w=>`<option value="${w.value}">${w.label}</option>`).join("");
  weekSel.value = "1"; daySel.value = "monday"; wkLabel.textContent = `Week ${weekSel.value}`;
  renderDay(daySel.value); loadDay(weekSel.value, daySel.value);

  weekSel.addEventListener("change", ()=>{ wkLabel.textContent = `Week ${weekSel.value}`; renderDay(daySel.value); loadDay(weekSel.value, daySel.value); });
  daySel.addEventListener("change", ()=>{ renderDay(daySel.value); loadDay(weekSel.value, daySel.value); });
  copyPrevBtn.addEventListener("click", copyPrevDay);
  resetDayBtn.addEventListener("click", resetDay);
}
document.addEventListener("DOMContentLoaded", init);
</script>
</body>
</html>
